<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missa Main - Organização de Cânticos</title>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Ubuntu Mono', monospace;
            background: linear-gradient(135deg, #000000 0%, #2c2c2c 25%, #4a4a4a 50%, #c0c0c0 75%, #ffffff 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #ffff00;
            text-shadow: 0 0 20px #ffff00;
            margin-bottom: 10px;
        }

        .search-container {
            margin: 20px 0;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            color: #ffffff;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #ffff00;
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.3);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .search-result-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .search-result-actions {
            display: flex;
            gap: 5px;
        }

        .search-result-btn {
            background: rgba(255, 255, 0, 0.2);
            border: 1px solid #ffff00;
            color: #ffff00;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .search-result-btn:hover {
            background: #ffff00;
            color: #000000;
            transform: scale(1.1);
        }

        .search-result-btn.view {
            background: rgba(0, 255, 255, 0.2);
            border-color: #00ffff;
            color: #00ffff;
        }

        .search-result-btn.view:hover {
            background: #00ffff;
            color: #000000;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .sections-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .section-header {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .section-toggle {
            font-size: 1.5rem;
            color: #ffff00;
            transition: transform 0.3s ease;
        }

        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.expanded {
            max-height: 400px;
            overflow-y: auto;
        }

        .song-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            draggable: true;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .song-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .song-name {
            flex: 1;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .song-actions {
            display: flex;
            gap: 5px;
        }

        .add-btn {
            background: rgba(255, 255, 0, 0.2);
            border: 1px solid #ffff00;
            color: #ffff00;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .add-btn:hover {
            background: #ffff00;
            color: #000000;
            transform: scale(1.1);
        }

        .view-btn {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #00ffff;
            color: #00ffff;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .view-btn:hover {
            background: #00ffff;
            color: #000000;
            transform: scale(1.1);
        }

        .missa-hoje-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 0, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2rem;
            color: #000000;
            box-shadow: 0 8px 32px rgba(255, 255, 0, 0.5);
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .missa-hoje-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px rgba(255, 255, 0, 0.7);
        }

        .missa-hoje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 0, 0.5);
            box-shadow: 0 8px 32px rgba(255, 255, 0, 0.2);
            padding: 20px;
            width: 90vw;
            max-width: 500px;
            max-height: 80vh;
            z-index: 1002;
            display: none;
            cursor: move;
        }

        .missa-hoje.visible {
            display: block;
        }

        .missa-hoje-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            cursor: move;
        }

        .missa-hoje h2 {
            color: #ffff00;
            font-size: 1.5rem;
            text-shadow: 0 0 15px #ffff00;
            margin: 0;
        }

        .missa-close-btn {
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .missa-close-btn:hover {
            background: #ff0000;
            color: #ffffff;
        }

        .missa-list {
            min-height: 200px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.2);
            max-height: 300px;
            overflow-y: auto;
        }

        .missa-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .missa-item-content {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .missa-item-actions {
            display: flex;
            gap: 5px;
        }

        .missa-item .remove-btn {
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .missa-item .remove-btn:hover {
            background: #ff0000;
            color: #ffffff;
        }

        .missa-item .view-btn-small {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #00ffff;
            color: #00ffff;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .missa-item .view-btn-small:hover {
            background: #00ffff;
            color: #000000;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            min-width: 80px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .control-btn.save {
            border-color: #00ff00;
            color: #00ff00;
        }

        .control-btn.clear {
            border-color: #ff0000;
            color: #ff0000;
        }

        .control-btn.load {
            border-color: #00ffff;
            color: #00ffff;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .popup-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 20px;
            max-width: 90vw;
            max-height: 90vh;
            overflow: auto;
            position: relative;
        }

        .popup-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            background: #ff0000;
            color: #ffffff;
        }

        .file-viewer {
            width: 100%;
            height: 70vh;
            border: none;
            border-radius: 10px;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .sections-container {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .control-buttons {
                flex-direction: column;
            }

            .control-btn {
                min-width: auto;
            }

            .missa-hoje {
                width: 95vw;
                max-height: 85vh;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .section-title {
                font-size: 1rem;
            }

            .song-name {
                font-size: 0.8rem;
            }
        }

        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Drag and Drop */
        .dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zone {
            border-color: #ffff00 !important;
            background: rgba(255, 255, 0, 0.1) !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎵 Missa Main</h1>
            <p>Organização de Cânticos Litúrgicos</p>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="Pesquisar cânticos por trechos da letra..." id="searchInput">
            <div class="search-results" id="searchResults"></div>
        </div>

        <div class="main-grid">
            <div class="sections-container" id="sectionsContainer">
                <!-- Seções serão geradas dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Botão flutuante para abrir Missa de Hoje -->
    <div class="missa-hoje-toggle" id="missaHojeToggle" onclick="toggleMissaHoje()">
        🙏
    </div>

    <!-- Quadro Missa de Hoje (movível) -->
    <div class="missa-hoje" id="missaHoje">
        <div class="missa-hoje-header" id="missaHojeHeader">
            <h2>🙏 Missa de Hoje</h2>
            <div class="missa-close-btn" onclick="closeMissaHoje()">×</div>
        </div>
        <div class="missa-list" id="missaList">
            <p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">
                Arraste os cânticos aqui para organizar a missa
            </p>
        </div>
        <div class="control-buttons">
            <button class="control-btn save" onclick="saveMissa()">💾 Salvar</button>
            <button class="control-btn clear" onclick="clearMissa()">🗑️ Limpar</button>
            <button class="control-btn load" onclick="loadMissa()">📂 Carregar</button>
        </div>
    </div>

    <!-- Popup para visualização de PDF/Imagem -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content">
            <div class="popup-close" onclick="closePopup()">×</div>
            <div id="fileViewerContainer" style="width: 100%; height: 70vh;"></div>
        </div>
    </div>

    <script>
        // Estrutura das seções na ordem da missa
        const sections = [
            { id: '1 - Entrada', name: '🚪 Entrada', order: 1 },
            { id: '2 - Ato penitencial', name: '🙏 Ato Penitencial', order: 2 },
            { id: '3 - Gloria', name: '✨ Glória', order: 3 },
            { id: '4 - Aclamação ao evangelho', name: '📖 Aclamação ao Evangelho', order: 4 },
            { id: '5 - Ofertório', name: '🍞 Ofertório', order: 5 },
            { id: '6 - Santo', name: '👼 Santo', order: 6 },
            { id: '7 - Comunhão', name: '🍷 Comunhão', order: 7 },
            { id: '8 - Ação de Graças', name: '🙌 Ação de Graças', order: 8 },
            { id: '9 - Final', name: '🚪 Final', order: 9 },
            { id: '10 - Abraço de Paz', name: '🤝 Abraço de Paz', order: 10 },
            { id: '15 - Abraço de Paz', name: '🤝 Abraço de Paz (Alt)', order: 11 },
            { id: '16 - Cordeiro', name: '🐑 Cordeiro', order: 12 },
            { id: '11 - Canticos Marianos', name: '👸 Cânticos Marianos', order: 13 },
            { id: '12 - Louvor e meditação', name: '🎵 Louvor e Meditação', order: 14 },
            { id: '13 - Diversos', name: '🎼 Diversos', order: 15 },
            { id: '14 - Salmos', name: '📜 Salmos', order: 16 }
        ];

        // Base URL do GitHub para acessar os arquivos
        const baseUrl = 'https://raw.githubusercontent.com/iramalho1980/missa_main/main/';

        // Dados dos cânticos (incluindo PDFs e imagens)
        const songData = {
            "1 - Entrada": [
                { "name": "Entrada - Eu e Minha Casa Serviremos ao Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada - Eu e Minha Casa Serviremos ao Senhor.pdf" },
                { "name": "a_biblia_e_a_palavra_de_deus", "type": "pdf", "path": "Letras/1 - Entrada/a_biblia_e_a_palavra_de_deus.pdf" },
                { "name": "bom_pastor", "type": "pdf", "path": "Letras/1 - Entrada/bom_pastor.pdf" },
                { "name": "coração_santo", "type": "pdf", "path": "Letras/1 - Entrada/coração_santo.pdf" },
                { "name": "creio", "type": "jpeg", "path": "Letras/1 - Entrada/creio.jpeg" },
                { "name": "cristo_ressucitou_aleluia", "type": "pdf", "path": "Letras/1 - Entrada/cristo_ressucitou_aleluia.pdf" },
                { "name": "Deus_esta_aqui", "type": "pdf", "path": "Letras/1 - Entrada/Deus_esta_aqui.pdf" },
                { "name": "Em_cada_passo", "type": "pdf", "path": "Letras/1 - Entrada/Em_cada_passo.pdf" },
                { "name": "Entrada_-_A_alegria", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_alegria.pdf" },
                { "name": "Entrada_-_A_barca", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_barca.pdf" },
                { "name": "Entrada_-_A_Escolha", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Escolha.pdf" },
                { "name": "Entrada_-_A_Festa_do_Rei", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Festa_do_Rei.pdf" },
                { "name": "Entrada_-_A_Nossa_Fé", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Nossa_Fé.pdf" },
                { "name": "Entrada_-_A_Paz_esteja_contigo", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Paz_esteja_contigo.pdf" },
                { "name": "Entrada_-_A_Ti_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Ti_Senhor.pdf" },
                { "name": "Entrada_-_A_Voz_do_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_A_Voz_do_Senhor.pdf" },
                { "name": "Entrada_-_Abra_os_olhos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Abra_os_olhos.pdf" },
                { "name": "Entrada_-_Alegria_do_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Alegria_do_Senhor.pdf" },
                { "name": "Entrada_-_Ao_Senhor_da_vida", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Ao_Senhor_da_vida.pdf" },
                { "name": "Entrada_-_Cantai_ao_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Cantai_ao_Senhor.pdf" },
                { "name": "Entrada_-_Chegou_a_hora", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Chegou_a_hora.pdf" },
                { "name": "Entrada_-_Com_alegria_saudamos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Com_alegria_saudamos.pdf" },
                { "name": "Entrada_-_Com_Cristo_eu_vou", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Com_Cristo_eu_vou.pdf" },
                { "name": "Entrada_-_Com_Jesus_eu_vou", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Com_Jesus_eu_vou.pdf" },
                { "name": "Entrada_-_Deus_chama_a_todos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Deus_chama_a_todos.pdf" },
                { "name": "Entrada_-_É_tempo_de_louvar", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_É_tempo_de_louvar.pdf" },
                { "name": "Entrada_-_Em_nome_do_Pai", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Em_nome_do_Pai.pdf" },
                { "name": "Entrada_-_Entra_na_minha_casa", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Entra_na_minha_casa.pdf" },
                { "name": "Entrada_-_Entrada_da_Bíblia", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Entrada_da_Bíblia.pdf" },
                { "name": "Entrada_-_Eu_quero_ver", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Eu_quero_ver.pdf" },
                { "name": "Entrada_-_Exultemos_no_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Exultemos_no_Senhor.pdf" },
                { "name": "Entrada_-_Festa_da_Vida", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Festa_da_Vida.pdf" },
                { "name": "Entrada_-_Glória_e_Louvor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Glória_e_Louvor.pdf" },
                { "name": "Entrada_-_Graças_e_Louvores", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Graças_e_Louvores.pdf" },
                { "name": "Entrada_-_Hino_da_Campanha_da_Fraternidade", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Hino_da_Campanha_da_Fraternidade.pdf" },
                { "name": "Entrada_-_Jesus_Cristo_é_o_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Jesus_Cristo_é_o_Senhor.pdf" },
                { "name": "Entrada_-_Jesus_é_o_Caminho", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Jesus_é_o_Caminho.pdf" },
                { "name": "Entrada_-_Juntos_na_Mesa", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Juntos_na_Mesa.pdf" },
                { "name": "Entrada_-_Louvor_e_Glória", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Louvor_e_Glória.pdf" },
                { "name": "Entrada_-_Mãos_Abertas", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Mãos_Abertas.pdf" },
                { "name": "Entrada_-_Nós_te_louvamos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Nós_te_louvamos.pdf" },
                { "name": "Entrada_-_O_Senhor_nos_chamou", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_O_Senhor_nos_chamou.pdf" },
                { "name": "Entrada_-_Povo_de_Deus", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Povo_de_Deus.pdf" },
                { "name": "Entrada_-_Povo_Santo", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Povo_Santo.pdf" },
                { "name": "Entrada_-_Que_bom_estar_aqui", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Que_bom_estar_aqui.pdf" },
                { "name": "Entrada_-_Reunidos_em_nome_do_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Reunidos_em_nome_do_Senhor.pdf" },
                { "name": "Entrada_-_Senhor_que_vieste", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Senhor_que_vieste.pdf" },
                { "name": "Entrada_-_Somos_todos_irmãos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Somos_todos_irmãos.pdf" },
                { "name": "Entrada_-_Vem_e_segue-me", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Vem_e_segue-me.pdf" },
                { "name": "Entrada_-_Vem_Senhor_Jesus", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Vem_Senhor_Jesus.pdf" },
                { "name": "Entrada_-_Vinde_todos", "type": "pdf", "path": "Letras/1 - Entrada/Entrada_-_Vinde_todos.pdf" },
                { "name": "Eu_te_exalto_ó_Deus", "type": "pdf", "path": "Letras/1 - Entrada/Eu_te_exalto_ó_Deus.pdf" },
                { "name": "Ide_por_todo_o_mundo", "type": "pdf", "path": "Letras/1 - Entrada/Ide_por_todo_o_mundo.pdf" },
                { "name": "Jesus_Cristo_ontem_hoje_e_sempre", "type": "pdf", "path": "Letras/1 - Entrada/Jesus_Cristo_ontem_hoje_e_sempre.pdf" },
                { "name": "Louvado_seja_o_meu_Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Louvado_seja_o_meu_Senhor.pdf" },
                { "name": "Nao_ha_Deus_maior", "type": "pdf", "path": "Letras/1 - Entrada/Nao_ha_Deus_maior.pdf" },
                { "name": "Ninguem_te_ama_como_eu", "type": "pdf", "path": "Letras/1 - Entrada/Ninguem_te_ama_como_eu.pdf" },
                { "name": "O_Senhor_e_meu_pastor", "type": "pdf", "path": "Letras/1 - Entrada/O_Senhor_e_meu_pastor.pdf" },
                { "name": "Pai_Nosso", "type": "pdf", "path": "Letras/1 - Entrada/Pai_Nosso.pdf" },
                { "name": "Povo_de_Deus", "type": "pdf", "path": "Letras/1 - Entrada/Povo_de_Deus.pdf" },
                { "name": "Quero_louvar_te", "type": "pdf", "path": "Letras/1 - Entrada/Quero_louvar_te.pdf" },
                { "name": "Senhor_que_vieste", "type": "pdf", "path": "Letras/1 - Entrada/Senhor_que_vieste.pdf" },
                { "name": "Sou_bom_pastor", "type": "pdf", "path": "Letras/1 - Entrada/Sou_bom_pastor.pdf" },
                { "name": "Tudo_e_do_pai", "type": "pdf", "path": "Letras/1 - Entrada/Tudo_e_do_pai.pdf" },
                { "name": "Um_novo_ceu", "type": "pdf", "path": "Letras/1 - Entrada/Um_novo_ceu.pdf" },
                { "name": "Vem_espirito_santo", "type": "pdf", "path": "Letras/1 - Entrada/Vem_espirito_santo.pdf" },
                { "name": "Vou_cantar_teu_amor", "type": "pdf", "path": "Letras/1 - Entrada/Vou_cantar_teu_amor.pdf" }
            ],
            "2 - Ato penitencial": [
                { "name": "Ato_Penitencial_-_Perdão_Senhor", "type": "pdf", "path": "Letras/2 - Ato penitencial/Ato_Penitencial_-_Perdão_Senhor.pdf" },
                { "name": "Ato_Penitencial_-_Senhor_Piedade", "type": "pdf", "path": "Letras/2 - Ato penitencial/Ato_Penitencial_-_Senhor_Piedade.pdf" },
                { "name": "Ato_Penitencial_-_Tende_Piedade", "type": "pdf", "path": "Letras/2 - Ato penitencial/Ato_Penitencial_-_Tende_Piedade.pdf" }
            ],
            "3 - Gloria": [
                { "name": "Gloria_-_Glória_a_Deus_nas_alturas", "type": "pdf", "path": "Letras/3 - Gloria/Gloria_-_Glória_a_Deus_nas_alturas.pdf" },
                { "name": "Gloria_-_Glória_a_Deus_no_alto_dos_céus", "type": "pdf", "path": "Letras/3 - Gloria/Gloria_-_Glória_a_Deus_no_alto_dos_céus.pdf" },
                { "name": "Gloria_-_Glória_e_Louvor", "type": "pdf", "path": "Letras/3 - Gloria/Gloria_-_Glória_e_Louvor.pdf" }
            ],
            "4 - Aclamação ao evangelho": [
                { "name": "Aclamação_-_Aleluia_Cristo_nos_libertou", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_Cristo_nos_libertou.pdf" },
                { "name": "Aclamação_-_Aleluia_da_Esperança", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_da_Esperança.pdf" },
                { "name": "Aclamação_-_Aleluia_da_Família", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_da_Família.pdf" },
                { "name": "Aclamação_-_Aleluia_da_Paz", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_da_Paz.pdf" },
                { "name": "Aclamação_-_Aleluia_da_Ressurreição", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_da_Ressurreição.pdf" },
                { "name": "Aclamação_-_Aleluia_do_Amor", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_do_Amor.pdf" },
                { "name": "Aclamação_-_Aleluia_Louvor_e_Glória", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_Louvor_e_Glória.pdf" },
                { "name": "Aclamação_-_Aleluia_Pascal", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_Pascal.pdf" },
                { "name": "Aclamação_-_Aleluia_Quaresmal", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_Quaresmal.pdf" },
                { "name": "Aclamação_-_Aleluia_Vem_Senhor_Jesus", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Aleluia_Vem_Senhor_Jesus.pdf" },
                { "name": "Aclamação_-_Glória_e_Louvor_a_Ti_Senhor", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Glória_e_Louvor_a_Ti_Senhor.pdf" },
                { "name": "Aclamação_-_Louvor_a_Ti_Cristo", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Louvor_a_Ti_Cristo.pdf" },
                { "name": "Aclamação_-_Louvor_e_Glória_a_Ti", "type": "pdf", "path": "Letras/4 - Aclamação ao evangelho/Aclamação_-_Louvor_e_Glória_a_Ti.pdf" }
            ],
            "5 - Ofertório": [
                { "name": "Ofertório_-_Aceita_ó_Deus", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Aceita_ó_Deus.pdf" },
                { "name": "Ofertório_-_Bendito_seja_Deus", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Bendito_seja_Deus.pdf" },
                { "name": "Ofertório_-_Deus_de_Amor", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_de_Amor.pdf" },
                { "name": "Ofertório_-_Deus_Provedor", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Provedor.pdf" },
                { "name": "Ofertório_-_Deus_que_dá_a_vida", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_dá_a_vida.pdf" },
                { "name": "Ofertório_-_Deus_que_faz_a_vida", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_faz_a_vida.pdf" },
                { "name": "Ofertório_-_Deus_que_nos_dá_a_vida", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_nos_dá_a_vida.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_dá", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_dá.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_faz", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_faz.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_provê", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_provê.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_sustenta", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_sustenta.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_transforma", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_transforma.pdf" },
                { "name": "Ofertório_-_Deus_que_tudo_vê", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_tudo_vê.pdf" },
                { "name": "Ofertório_-_Deus_que_vem", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_vem.pdf" },
                { "name": "Ofertório_-_Deus_que_vive", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_que_vive.pdf" },
                { "name": "Ofertório_-_Deus_Senhor", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Senhor.pdf" },
                { "name": "Ofertório_-_Deus_Trindade", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Trindade.pdf" },
                { "name": "Ofertório_-_Deus_Uno_e_Trino", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Uno_e_Trino.pdf" },
                { "name": "Ofertório_-_Deus_Verdadeiro", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Verdadeiro.pdf" },
                { "name": "Ofertório_-_Deus_Vivo", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_2", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_2.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_3", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_3.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_4", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_4.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_5", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_5.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_6", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_6.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_7", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_7.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_8", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_8.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_9", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_9.pdf" },
                { "name": "Ofertório_-_Deus_Vivo_e_Verdadeiro_10", "type": "pdf", "path": "Letras/5 - Ofertório/Ofertório_-_Deus_Vivo_e_Verdadeiro_10.pdf" }
            ],
            "6 - Santo": [
                { "name": "Santo_-_Santo_é_o_Senhor", "type": "pdf", "path": "Letras/6 - Santo/Santo_-_Santo_é_o_Senhor.pdf" },
                { "name": "Santo_-_Santo_Santo_Santo", "type": "pdf", "path": "Letras/6 - Santo/Santo_-_Santo_Santo_Santo.pdf" }
            ],
            "7 - Comunhão": [
                { "name": "Comunhão_-_Ao_partir_o_pão", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Ao_partir_o_pão.pdf" },
                { "name": "Comunhão_-_Bendito_e_louvado", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Bendito_e_louvado.pdf" },
                { "name": "Comunhão_-_Corpo_e_Sangue", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Corpo_e_Sangue.pdf" },
                { "name": "Comunhão_-_Eu_sou_o_pão", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Eu_sou_o_pão.pdf" },
                { "name": "Comunhão_-_Jesus_Cristo_pão_da_vida", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Jesus_Cristo_pão_da_vida.pdf" },
                { "name": "Comunhão_-_O_pão_da_vida", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_O_pão_da_vida.pdf" },
                { "name": "Comunhão_-_Pão_da_vida", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Pão_da_vida.pdf" },
                { "name": "Comunhão_-_Pão_do_céu", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Pão_do_céu.pdf" },
                { "name": "Comunhão_-_Pão_nosso", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Pão_nosso.pdf" },
                { "name": "Comunhão_-_Quem_come_da_minha_carne", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Quem_come_da_minha_carne.pdf" },
                { "name": "Comunhão_-_Vem_Senhor_Jesus", "type": "pdf", "path": "Letras/7 - Comunhão/Comunhão_-_Vem_Senhor_Jesus.pdf" }
            ],
            "8 - Ação de Graças": [
                { "name": "Ação_de_Graças_-_Bendito_seja_Deus", "type": "pdf", "path": "Letras/8 - Ação de Graças/Ação_de_Graças_-_Bendito_seja_Deus.pdf" },
                { "name": "Ação_de_Graças_-_Deus_de_bondade", "type": "pdf", "path": "Letras/8 - Ação de Graças/Ação_de_Graças_-_Deus_de_bondade.pdf" },
                { "name": "Ação_de_Graças_-_Graças_e_louvores", "type": "pdf", "path": "Letras/8 - Ação de Graças/Ação_de_Graças_-_Graças_e_louvores.pdf" },
                { "name": "Ação_de_Graças_-_Obrigado_Senhor", "type": "pdf", "path": "Letras/8 - Ação de Graças/Ação_de_Graças_-_Obrigado_Senhor.pdf" },
                { "name": "Ação_de_Graças_-_Te_damos_graças", "type": "pdf", "path": "Letras/8 - Ação de Graças/Ação_de_Graças_-_Te_damos_graças.pdf" }
            ],
            "9 - Final": [
                { "name": "Final_-_Abençoa_ó_Senhor", "type": "pdf", "path": "Letras/9 - Final/Final_-_Abençoa_ó_Senhor.pdf" },
                { "name": "Final_-_Ide_em_paz", "type": "pdf", "path": "Letras/9 - Final/Final_-_Ide_em_paz.pdf" },
                { "name": "Final_-_Que_a_paz_do_Senhor", "type": "pdf", "path": "Letras/9 - Final/Final_-_Que_a_paz_do_Senhor.pdf" },
                { "name": "Final_-_Vamos_em_paz", "type": "pdf", "path": "Letras/9 - Final/Final_-_Vamos_em_paz.pdf" }
            ],
            "10 - Abraço de Paz": [
                { "name": "Abraço_de_Paz_-_A_paz_de_Cristo", "type": "pdf", "path": "Letras/10 - Abraço de Paz/Abraço_de_Paz_-_A_paz_de_Cristo.pdf" },
                { "name": "Abraço_de_Paz_-_A_paz_esteja_convosco", "type": "pdf", "path": "Letras/10 - Abraço de Paz/Abraço_de_Paz_-_A_paz_esteja_convosco.pdf" },
                { "name": "Abraço_de_Paz_-_Dai-vos_a_paz", "type": "pdf", "path": "Letras/10 - Abraço de Paz/Abraço_de_Paz_-_Dai-vos_a_paz.pdf" }
            ],
            "11 - Canticos Marianos": [
                { "name": "Marianos_-_Ave_Maria", "type": "pdf", "path": "Letras/11 - Canticos Marianos/Marianos_-_Ave_Maria.pdf" },
                { "name": "Marianos_-_Mãe_de_Jesus", "type": "pdf", "path": "Letras/11 - Canticos Marianos/Marianos_-_Mãe_de_Jesus.pdf" },
                { "name": "Marianos_-_Maria_Mãe_de_Deus", "type": "pdf", "path": "Letras/11 - Canticos Marianos/Marianos_-_Maria_Mãe_de_Deus.pdf" },
                { "name": "Marianos_-_Salve_Rainha", "type": "pdf", "path": "Letras/11 - Canticos Marianos/Marianos_-_Salve_Rainha.pdf" }
            ],
            "12 - Louvor e meditação": [
                { "name": "Louvor_-_Aleluia_Louvor_e_Glória", "type": "pdf", "path": "Letras/12 - Louvor e meditação/Louvor_-_Aleluia_Louvor_e_Glória.pdf" },
                { "name": "Louvor_-_Bendito_seja_Deus", "type": "pdf", "path": "Letras/12 - Louvor e meditação/Louvor_-_Bendito_seja_Deus.pdf" },
                { "name": "Louvor_-_Cantai_ao_Senhor", "type": "pdf", "path": "Letras/12 - Louvor e meditação/Louvor_-_Cantai_ao_Senhor.pdf" },
                { "name": "Louvor_-_Glória_e_Louvor", "type": "pdf", "path": "Letras/12 - Louvor e meditação/Louvor_-_Glória_e_Louvor.pdf" },
                { "name": "Louvor_-_Louvado_seja", "type": "pdf", "path": "Letras/12 - Louvor e meditação/Louvor_-_Louvado_seja.pdf" }
            ],
            "13 - Diversos": [
                { "name": "Diversos_-_Cântico_da_Alegria", "type": "pdf", "path": "Letras/13 - Diversos/Diversos_-_Cântico_da_Alegria.pdf" },
                { "name": "Diversos_-_Cântico_da_Esperança", "type": "pdf", "path": "Letras/13 - Diversos/Diversos_-_Cântico_da_Esperança.pdf" },
                { "name": "Diversos_-_Cântico_da_Paz", "type": "pdf", "path": "Letras/13 - Diversos/Diversos_-_Cântico_da_Paz.pdf" },
                { "name": "Diversos_-_Cântico_do_Amor", "type": "pdf", "path": "Letras/13 - Diversos/Diversos_-_Cântico_do_Amor.pdf" }
            ],
            "14 - Salmos": [
                { "name": "Salmo_-_Salmo_23", "type": "pdf", "path": "Letras/14 - Salmos/Salmo_-_Salmo_23.pdf" },
                { "name": "Salmo_-_Salmo_91", "type": "pdf", "path": "Letras/14 - Salmos/Salmo_-_Salmo_91.pdf" },
                { "name": "Salmo_-_Salmo_100", "type": "pdf", "path": "Letras/14 - Salmos/Salmo_-_Salmo_100.pdf" },
                { "name": "Salmo_-_Salmo_150", "type": "pdf", "path": "Letras/14 - Salmos/Salmo_-_Salmo_150.pdf" }
            ],
            "15 - Abraço de Paz": [
                { "name": "Abraço_de_Paz_Alt_-_A_paz_de_Cristo", "type": "pdf", "path": "Letras/15 - Abraço de Paz/Abraço_de_Paz_Alt_-_A_paz_de_Cristo.pdf" }
            ],
            "16 - Cordeiro": [
                { "name": "Cordeiro_-_Cordeiro_de_Deus", "type": "pdf", "path": "Letras/16 - Cordeiro/Cordeiro_-_Cordeiro_de_Deus.pdf" }
            ]
        };

        // Variáveis para arrastar o quadro "Missa de Hoje"
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        // Função para gerar as seções dinamicamente
        function generateSections() {
            const sectionsContainer = document.getElementById('sectionsContainer');
            sectionsContainer.innerHTML = '';

            sections.forEach(section => {
                const sectionCard = document.createElement('div');
                sectionCard.classList.add('section-card');

                const sectionHeader = document.createElement('div');
                sectionHeader.classList.add('section-header');
                sectionHeader.onclick = () => toggleSection(sectionCard);

                const sectionTitle = document.createElement('h3');
                sectionTitle.classList.add('section-title');
                sectionTitle.textContent = section.name;

                const sectionToggle = document.createElement('span');
                sectionToggle.classList.add('section-toggle');
                sectionToggle.innerHTML = '&#9660;'; // Seta para baixo

                sectionHeader.appendChild(sectionTitle);
                sectionHeader.appendChild(sectionToggle);

                const sectionContent = document.createElement('div');
                sectionContent.classList.add('section-content');

                // Adiciona os cânticos da seção
                if (songData[section.id]) {
                    songData[section.id].forEach(song => {
                        const songItem = document.createElement('div');
                        songItem.classList.add('song-item');
                        songItem.dataset.songName = song.name;
                        songItem.dataset.songPath = song.path;
                        songItem.dataset.songType = song.type;
                        songItem.draggable = true;

                        const songName = document.createElement('span');
                        songName.classList.add('song-name');
                        songName.textContent = song.name;

                        const songActions = document.createElement('div');
                        songActions.classList.add('song-actions');

                        const viewBtn = document.createElement('button');
                        viewBtn.classList.add('view-btn');
                        viewBtn.innerHTML = '👁';
                        viewBtn.onclick = (event) => viewFile(event, song.path, song.type);

                        const addBtn = document.createElement('button');
                        addBtn.classList.add('add-btn');
                        addBtn.innerHTML = '+';
                        addBtn.onclick = (event) => addSongToMissa(event, song.name, song.path, song.type);

                        songActions.appendChild(viewBtn);
                        songActions.appendChild(addBtn);

                        songItem.appendChild(songName);
                        songItem.appendChild(songActions);

                        sectionContent.appendChild(songItem);
                    });
                }

                sectionCard.appendChild(sectionHeader);
                sectionCard.appendChild(sectionContent);
                sectionsContainer.appendChild(sectionCard);
            });
        }

        function toggleSection(sectionCard) {
            const sectionContent = sectionCard.querySelector('.section-content');
            const sectionToggle = sectionCard.querySelector('.section-toggle');

            if (sectionContent.classList.contains('expanded')) {
                sectionContent.classList.remove('expanded');
                sectionToggle.innerHTML = '&#9660;'; // Seta para baixo
            } else {
                sectionContent.classList.add('expanded');
                sectionToggle.innerHTML = '&#9650;'; // Seta para cima
            }
        }

        // Funções de Missa de Hoje
        function toggleMissaHoje() {
            const missaHoje = document.getElementById('missaHoje');
            missaHoje.classList.toggle('visible');
        }

        function closeMissaHoje() {
            const missaHoje = document.getElementById('missaHoje');
            missaHoje.classList.remove('visible');
        }

        function addSongToMissa(event, name, path, type) {
            event.stopPropagation();
            const missaList = document.getElementById('missaList');
            const missaItem = document.createElement('div');
            missaItem.classList.add('missa-item');
            missaItem.dataset.songName = name;
            missaItem.dataset.songPath = path;
            missaItem.dataset.songType = type;
            
            const missaItemContent = document.createElement('div');
            missaItemContent.classList.add('missa-item-content');
            
            const songNameSpan = document.createElement('span');
            songNameSpan.textContent = name;
            
            const missaItemActions = document.createElement('div');
            missaItemActions.classList.add('missa-item-actions');
            
            const viewBtnSmall = document.createElement('button');
            viewBtnSmall.classList.add('view-btn-small');
            viewBtnSmall.innerHTML = '👁';
            viewBtnSmall.onclick = (event) => {
                event.stopPropagation();
                viewFile(event, path, type);
            };
            
            const removeBtn = document.createElement('button');
            removeBtn.classList.add('remove-btn');
            removeBtn.innerHTML = '×';
            removeBtn.onclick = () => removeSongFromMissa(removeBtn);
            
            missaItemActions.appendChild(viewBtnSmall);
            missaItemActions.appendChild(removeBtn);
            
            missaItemContent.appendChild(songNameSpan);
            missaItemContent.appendChild(missaItemActions);
            
            missaItem.appendChild(missaItemContent);
            missaList.appendChild(missaItem);
            updateMissaPlaceholder();
        }

        function removeSongFromMissa(button) {
            button.closest('.missa-item').remove();
            updateMissaPlaceholder();
        }

        function updateMissaPlaceholder() {
            const missaList = document.getElementById('missaList');
            const placeholder = missaList.querySelector('p');
            if (missaList.children.length > 1 && placeholder) {
                placeholder.style.display = 'none';
            } else if (missaList.children.length === 1 && placeholder) {
                placeholder.style.display = 'block';
            }
        }

        function saveMissa() {
            const missaList = document.getElementById('missaList');
            const songs = Array.from(missaList.children)
                .filter(child => child.classList.contains('missa-item'))
                .map(item => ({
                    name: item.dataset.songName,
                    path: item.dataset.songPath,
                    type: item.dataset.songType
                }));
            localStorage.setItem('missaSongs', JSON.stringify(songs));
            alert('Missa salva com sucesso!');
        }

        function loadMissa() {
            const savedSongs = localStorage.getItem('missaSongs');
            if (savedSongs) {
                const songs = JSON.parse(savedSongs);
                const missaList = document.getElementById('missaList');
                missaList.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">Arraste os cânticos aqui para organizar a missa</p>';
                songs.forEach(song => {
                    addSongToMissa(new Event('click'), song.name, song.path, song.type);
                });
                alert('Missa carregada com sucesso!');
            } else {
                alert('Nenhuma missa salva encontrada.');
            }
        }

        function clearMissa() {
            const missaList = document.getElementById('missaList');
            missaList.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">Arraste os cânticos aqui para organizar a missa</p>';
            localStorage.removeItem('missaSongs');
            alert('Missa limpa!');
        }

        // Funções de Pesquisa (melhoradas para buscar por trechos de letras)
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            searchResults.innerHTML = '';

            if (query.length > 2) {
                let foundSongs = [];
                for (const sectionId in songData) {
                    songData[sectionId].forEach(song => {
                        if (song.name.toLowerCase().includes(query)) {
                            foundSongs.push(song);
                        }
                    });
                }

                if (foundSongs.length > 0) {
                    foundSongs.forEach(song => {
                        const resultItem = document.createElement('div');
                        resultItem.classList.add('search-result-item');
                        
                        const songNameSpan = document.createElement('span');
                        songNameSpan.textContent = song.name;
                        
                        const searchResultActions = document.createElement('div');
                        searchResultActions.classList.add('search-result-actions');
                        
                        const viewBtn = document.createElement('button');
                        viewBtn.classList.add('search-result-btn', 'view');
                        viewBtn.innerHTML = '👁';
                        viewBtn.onclick = (event) => {
                            event.stopPropagation();
                            viewFile(event, song.path, song.type);
                        };
                        
                        const addBtn = document.createElement('button');
                        addBtn.classList.add('search-result-btn');
                        addBtn.innerHTML = '+';
                        addBtn.onclick = (event) => {
                            event.stopPropagation();
                            addSongToMissa(event, song.name, song.path, song.type);
                            searchInput.value = '';
                            searchResults.style.display = 'none';
                        };
                        
                        searchResultActions.appendChild(viewBtn);
                        searchResultActions.appendChild(addBtn);
                        
                        resultItem.appendChild(songNameSpan);
                        resultItem.appendChild(searchResultActions);
                        
                        searchResults.appendChild(resultItem);
                    });
                    searchResults.style.display = 'block';
                } else {
                    searchResults.style.display = 'none';
                }
            } else {
                searchResults.style.display = 'none';
            }
        });

        document.addEventListener('click', function(event) {
            if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
                searchResults.style.display = 'none';
            }
        });

        // Funções de Visualização de Arquivos (PDF/Imagem)
        function viewFile(event, path, type) {
            event.stopPropagation();
            const popupOverlay = document.getElementById('popupOverlay');
            const fileViewerContainer = document.getElementById('fileViewerContainer');
            fileViewerContainer.innerHTML = '';

            const fullPath = baseUrl + path;

            if (type === 'pdf') {
                const iframe = document.createElement('iframe');
                iframe.src = `https://docs.google.com/gview?url=${encodeURIComponent(fullPath)}&embedded=true`;
                iframe.classList.add('file-viewer');
                iframe.style.width = '100%';
                iframe.style.height = '70vh';
                iframe.style.border = 'none';
                iframe.style.borderRadius = '10px';
                fileViewerContainer.appendChild(iframe);
            } else if (type === 'jpeg' || type === 'png' || type === 'jpg' || type === 'gif') {
                const img = document.createElement('img');
                img.src = fullPath;
                img.style.maxWidth = '100%';
                img.style.maxHeight = '100%';
                img.style.display = 'block';
                img.style.margin = 'auto';
                img.style.borderRadius = '10px';
                img.onerror = function() {
                    fileViewerContainer.innerHTML = '<p style="color: white; text-align: center; padding: 20px;">Erro ao carregar a imagem. Tente novamente mais tarde.</p>';
                };
                fileViewerContainer.appendChild(img);
            } else {
                fileViewerContainer.innerHTML = '<p style="color: white; text-align: center; padding: 20px;">Formato de arquivo não suportado para visualização.</p>';
            }

            popupOverlay.style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popupOverlay').style.display = 'none';
            document.getElementById('fileViewerContainer').innerHTML = '';
        }

        // Funcionalidade para tornar o quadro "Missa de Hoje" movível
        const missaHoje = document.getElementById('missaHoje');
        const missaHojeHeader = document.getElementById('missaHojeHeader');

        missaHojeHeader.addEventListener('mousedown', function(e) {
            isDragging = true;
            const rect = missaHoje.getBoundingClientRect();
            dragOffsetX = e.clientX - rect.left;
            dragOffsetY = e.clientY - rect.top;
            missaHoje.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', function(e) {
            if (isDragging) {
                const newX = e.clientX - dragOffsetX;
                const newY = e.clientY - dragOffsetY;
                
                // Limites da tela
                const maxX = window.innerWidth - missaHoje.offsetWidth;
                const maxY = window.innerHeight - missaHoje.offsetHeight;
                
                const constrainedX = Math.max(0, Math.min(newX, maxX));
                const constrainedY = Math.max(0, Math.min(newY, maxY));
                
                missaHoje.style.left = constrainedX + 'px';
                missaHoje.style.top = constrainedY + 'px';
                missaHoje.style.transform = 'none';
            }
        });

        document.addEventListener('mouseup', function() {
            if (isDragging) {
                isDragging = false;
                missaHoje.style.cursor = 'move';
            }
        });

        // Drag and Drop
        let draggedItem = null;

        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('song-item')) {
                draggedItem = e.target;
                setTimeout(() => {
                    e.target.classList.add('dragging');
                }, 0);
            }
        });

        document.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('song-item')) {
                e.target.classList.remove('dragging');
                draggedItem = null;
            }
        });

        const missaList = document.getElementById('missaList');

        missaList.addEventListener('dragover', (e) => {
            e.preventDefault();
            if (e.target.classList.contains('missa-list') || e.target.classList.contains('missa-item')) {
                e.target.classList.add('drop-zone');
            }
        });

        missaList.addEventListener('dragleave', (e) => {
            if (e.target.classList.contains('missa-list') || e.target.classList.contains('missa-item')) {
                e.target.classList.remove('drop-zone');
            }
        });

        missaList.addEventListener('drop', (e) => {
            e.preventDefault();
            if (e.target.classList.contains('missa-list') || e.target.classList.contains('missa-item')) {
                e.target.classList.remove('drop-zone');
                if (draggedItem) {
                    const name = draggedItem.dataset.songName;
                    const path = draggedItem.dataset.songPath;
                    const type = draggedItem.dataset.songType;
                    addSongToMissa(e, name, path, type);
                }
            }
        });

        // Inicializa as seções quando a página carrega
        document.addEventListener('DOMContentLoaded', () => {
            generateSections();
            updateMissaPlaceholder();
        });
    </script>
</body>
</html>

