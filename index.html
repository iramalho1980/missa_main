<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missa Main - Organiza√ß√£o de C√¢nticos</title>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Ubuntu Mono', monospace;
            background: linear-gradient(135deg, #000000 0%, #2c2c2c 25%, #4a4a4a 50%, #c0c0c0 75%, #ffffff 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #ffff00;
            text-shadow: 0 0 20px #ffff00;
            margin-bottom: 10px;
        }

        .search-container {
            margin: 20px 0;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            color: #ffffff;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #ffff00;
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.3);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .search-result-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .sections-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .section-header {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .section-toggle {
            font-size: 1.5rem;
            color: #ffff00;
            transition: transform 0.3s ease;
        }

        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.expanded {
            max-height: 400px;
            overflow-y: auto;
        }

        .song-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            draggable: true;
        }

        .song-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .song-name {
            flex: 1;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .add-btn {
            background: rgba(255, 255, 0, 0.2);
            border: 1px solid #ffff00;
            color: #ffff00;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .add-btn:hover {
            background: #ffff00;
            color: #000000;
            transform: scale(1.1);
        }

        .missa-hoje-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 0, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 2rem;
            color: #000000;
            box-shadow: 0 8px 32px rgba(255, 255, 0, 0.5);
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .missa-hoje-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px rgba(255, 255, 0, 0.7);
        }

        .missa-hoje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 0, 0.5);
            box-shadow: 0 8px 32px rgba(255, 255, 0, 0.2);
            padding: 20px;
            width: 90vw;
            max-width: 500px;
            max-height: 80vh;
            z-index: 1002;
            display: none;
        }

        .missa-hoje.visible {
            display: block;
        }

        .missa-hoje h2 {
            color: #ffff00;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            text-shadow: 0 0 15px #ffff00;
        }

        .missa-list {
            min-height: 200px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.2);
            max-height: 300px;
            overflow-y: auto;
        }

        .missa-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .missa-item .remove-btn {
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .missa-item .remove-btn:hover {
            background: #ff0000;
            color: #ffffff;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            min-width: 80px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .control-btn.save {
            border-color: #00ff00;
            color: #00ff00;
        }

        .control-btn.clear {
            border-color: #ff0000;
            color: #ff0000;
        }

        .control-btn.load {
            border-color: #00ffff;
            color: #00ffff;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .popup-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 20px;
            max-width: 90vw;
            max-height: 90vh;
            overflow: auto;
            position: relative;
        }

        .popup-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255, 0, 0, 0.3);
            border: 1px solid #ff0000;
            color: #ff0000;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            background: #ff0000;
            color: #ffffff;
        }

        .file-viewer {
            width: 100%;
            height: 70vh;
            border: none;
            border-radius: 10px;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .sections-container {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .control-buttons {
                flex-direction: column;
            }

            .control-btn {
                min-width: auto;
            }

            .missa-hoje {
                width: 95vw;
                max-height: 85vh;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .section-title {
                font-size: 1rem;
            }

            .song-name {
                font-size: 0.8rem;
            }
        }

        /* Anima√ß√µes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Drag and Drop */
        .dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zone {
            border-color: #ffff00 !important;
            background: rgba(255, 255, 0, 0.1) !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ Missa Main</h1>
            <p>Organiza√ß√£o de C√¢nticos Lit√∫rgicos</p>
        </div>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="Pesquisar c√¢nticos por trechos da letra..." id="searchInput">
            <div class="search-results" id="searchResults"></div>
        </div>

        <div class="main-grid">
            <div class="sections-container" id="sectionsContainer">
                <!-- Se√ß√µes ser√£o geradas dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Bot√£o flutuante para abrir Missa de Hoje -->
    <div class="missa-hoje-toggle" id="missaHojeToggle" onclick="toggleMissaHoje()">
        üôè
    </div>

    <!-- Quadro Missa de Hoje (impl√≠cito) -->
    <div class="missa-hoje" id="missaHoje">
        <h2>üôè Missa de Hoje</h2>
        <div class="missa-list" id="missaList">
            <p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">
                Arraste os c√¢nticos aqui para organizar a missa
            </p>
        </div>
        <div class="control-buttons">
            <button class="control-btn save" onclick="saveMissa()">üíæ Salvar</button>
            <button class="control-btn clear" onclick="clearMissa()">üóëÔ∏è Limpar</button>
            <button class="control-btn load" onclick="loadMissa()">üìÇ Carregar</button>
        </div>
    </div>

    <!-- Popup para visualiza√ß√£o de PDF/Imagem -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content">
            <div class="popup-close" onclick="closePopup()">√ó</div>
            <div id="fileViewerContainer" style="width: 100%; height: 70vh;"></div>
        </div>
    </div>

    <script>
        // Estrutura das se√ß√µes na ordem da missa
        const sections = [
            { id: '1 - Entrada', name: 'üö™ Entrada', order: 1 },
            { id: '2 - Ato penitencial', name: 'üôè Ato Penitencial', order: 2 },
            { id: '3 - Gloria', name: '‚ú® Gl√≥ria', order: 3 },
            { id: '4 - Aclama√ß√£o ao evangelho', name: 'üìñ Aclama√ß√£o ao Evangelho', order: 4 },
            { id: '5 - Ofert√≥rio', name: 'üçû Ofert√≥rio', order: 5 },
            { id: '6 - Santo', name: 'üëº Santo', order: 6 },
            { id: '7 - Comunh√£o', name: 'üç∑ Comunh√£o', order: 7 },
            { id: '8 - A√ß√£o de Gra√ßas', name: 'üôå A√ß√£o de Gra√ßas', order: 8 },
            { id: '9 - Final', name: 'üö™ Final', order: 9 },
            { id: '10 - Abra√ßo de Paz', name: 'ü§ù Abra√ßo de Paz', order: 10 },
            { id: '15 - Abra√ßo de Paz', name: 'ü§ù Abra√ßo de Paz (Alt)', order: 11 },
            { id: '16 - Cordeiro', name: 'üêë Cordeiro', order: 12 },
            { id: '11 - Canticos Marianos', name: 'üë∏ C√¢nticos Marianos', order: 13 },
            { id: '12 - Louvor e medita√ß√£o', name: 'üéµ Louvor e Medita√ß√£o', order: 14 },
            { id: '13 - Diversos', name: 'üéº Diversos', order: 15 },
            { id: '14 - Salmos', name: 'üìú Salmos', order: 16 }
        ];

        // Base URL do GitHub para acessar os arquivos
        const baseUrl = 'https://github.com/iramalho1980/missa_main/raw/main/';

        // Dados dos c√¢nticos (incluindo PDFs e imagens)
        const songData = {
            "1 - Entrada": [
                { "name": "Entrada - Eu e Minha Casa Serviremos ao Senhor", "type": "pdf", "path": "Letras/1 - Entrada/Entrada - Eu e Minha Casa Serviremos ao Senhor.pdf" },
                { "name": "a_biblia_e_a_palavra_de_deus", "type": "pdf", "path": "Letras/1 - Entrada/a_biblia_e_a_palavra_de_deus.pdf" },
                { "name": "bom_pastor", "type": "pdf", "path": "Letras/1 - Entrada/bom_pastor.pdf" },
                { "name": "cora√ß√£o_santo", "type": "pdf", "path": "Letras/1 - Entrada/cora√ß√£o_santo.pdf" },
                { "name": "creio", "type": "jpeg", "path": "Letras/1 - Entrada/creio.jpeg" },
                { "name": "cristo_ressucitou_aleluia", "type": "pdf", "path": "Letras/1 - Entrada/cristo_ressucitou_aleluia.pdf" },
                { "name": "deixa_a_luz_do_ceu_entrar", "type": "pdf", "path": "Letras/1 - Entrada/deixa_a_luz_do_ceu_entrar.pdf" },
                { "name": "eis_me_aqui_senhor", "type": "pdf", "path": "Letras/1 - Entrada/eis_me_aqui_senhor.pdf" },
                { "name": "esatremos_aqui_reunidos", "type": "pdf", "path": "Letras/1 - Entrada/esatremos_aqui_reunidos.pdf" },
                { "name": "faco_novas_todas_as_coisas", "type": "pdf", "path": "Letras/1 - Entrada/faco_novas_todas_as_coisas.pdf" },
                { "name": "hosana_hey_hosana_ha", "type": "pdf", "path": "Letras/1 - Entrada/hosana_hey_hosana_ha.pdf" },
                { "name": "por_entre_aclama√ß√µes", "type": "pdf", "path": "Letras/1 - Entrada/por_entre_aclama√ß√µes.pdf" },
                { "name": "por_sua_morte", "type": "pdf", "path": "Letras/1 - Entrada/por_sua_morte.pdf" },
                { "name": "porque_ele_vive", "type": "pdf", "path": "Letras/1 - Entrada/porque_ele_vive.pdf" },
                { "name": "senhor_quem_entrara", "type": "pdf", "path": "Letras/1 - Entrada/senhor_quem_entrara.pdf" },
                { "name": "te_amarei", "type": "pdf", "path": "Letras/1 - Entrada/te_amarei.pdf" },
                { "name": "toda_biblia_e_comunicacao", "type": "pdf", "path": "Letras/1 - Entrada/toda_biblia_e_comunicacao.pdf" },
                { "name": "tu_es_a_razao_da_jornada", "type": "pdf", "path": "Letras/1 - Entrada/tu_es_a_razao_da_jornada.pdf" },
                { "name": "vem_louvar", "type": "pdf", "path": "Letras/1 - Entrada/vem_louvar.pdf" }
            ],
            "2 - Ato penitencial": [
                { "name": "Ato Penitencial - Senhor, Piedade", "type": "pdf", "path": "Letras/2 - Ato penitencial/Ato Penitencial - Senhor, Piedade.pdf" },
                { "name": "Senhor que viestes salvar", "type": "jpeg", "path": "Letras/2 - Ato penitencial/Senhor que viestes salvar.jpeg" },
                { "name": "conheco_um_coracao", "type": "pdf", "path": "Letras/2 - Ato penitencial/conheco_um_coracao.pdf" },
                { "name": "coracoes_arrependidos", "type": "pdf", "path": "Letras/2 - Ato penitencial/coracoes_arrependidos.pdf" },
                { "name": "kyrie_eleison_jmj", "type": "pdf", "path": "Letras/2 - Ato penitencial/kyrie_eleison_jmj.pdf" },
                { "name": "pelos_pecados_senhor_piedade_de_nos", "type": "pdf", "path": "Letras/2 - Ato penitencial/pelos_pecados_senhor_piedade_de_nos.pdf" },
                { "name": "perdao_senhor", "type": "pdf", "path": "Letras/2 - Ato penitencial/perdao_senhor.pdf" },
                { "name": "renovame", "type": "pdf", "path": "Letras/2 - Ato penitencial/renovame.pdf" },
                { "name": "renovame_ii", "type": "pdf", "path": "Letras/2 - Ato penitencial/renovame_ii.pdf" },
                { "name": "senhor_que_viestes_salvar_kirie_elleisson", "type": "pdf", "path": "Letras/2 - Ato penitencial/senhor_que_viestes_salvar_kirie_elleisson.pdf" },
                { "name": "senhor_tende_piedade_de_nos", "type": "pdf", "path": "Letras/2 - Ato penitencial/senhor_tende_piedade_de_nos.pdf" },
                { "name": "senhor_tende_piedade_perdoai_nossa_culpa", "type": "pdf", "path": "Letras/2 - Ato penitencial/senhor_tende_piedade_perdoai_nossa_culpa.pdf" }
            ],
            "3 - Gloria": [
                { "name": "Gloria a Deus nas alturas - Continua√ß√£o", "type": "jpeg", "path": "Letras/3 - Gloria/Gloria a Deus nas alturas - Continua√ß√£o.jpeg" },
                { "name": "Gloria a Deus nas alturas", "type": "jpeg", "path": "Letras/3 - Gloria/Gloria a Deus nas alturas.jpeg" },
                { "name": "Gl√≥ria - Eliana Ribeiro", "type": "pdf", "path": "Letras/3 - Gloria/Gl√≥ria - Eliana Ribeiro.pdf" },
                { "name": "a_ele_seja_a_gloria", "type": "pdf", "path": "Letras/3 - Gloria/a_ele_seja_a_gloria.pdf" },
                { "name": "gloria_a_deus_nas_alturas", "type": "pdf", "path": "Letras/3 - Gloria/gloria_a_deus_nas_alturas.pdf" },
                { "name": "gloria_a_deus_nas_alturas__rock_balada", "type": "pdf", "path": "Letras/3 - Gloria/gloria_a_deus_nas_alturas__rock_balada.pdf" },
                { "name": "gloria_ao_pai_criador", "type": "pdf", "path": "Letras/3 - Gloria/gloria_ao_pai_criador.pdf" }
            ],
            "4 - Aclama√ß√£o ao evangelho": [
                { "name": "a_minhalma_abrirei", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/a_minhalma_abrirei.pdf" },
                { "name": "a_vossa_palavra_senhor", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/a_vossa_palavra_senhor.pdf" },
                { "name": "aleluia_como_o_pai_me_amou", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/aleluia_como_o_pai_me_amou.pdf" },
                { "name": "buscai_primeiro_o_reino_de_deus", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/buscai_primeiro_o_reino_de_deus.pdf" },
                { "name": "como_sao_belos", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/como_sao_belos.pdf" },
                { "name": "eu_vim_para_escutar", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/eu_vim_para_escutar.pdf" },
                { "name": "palavra_de_salvacao", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/palavra_de_salvacao.pdf" },
                { "name": "quando_estamos_unidos", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/quando_estamos_unidos.pdf" },
                { "name": "que_alegria_cristo_ressurgiu", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/que_alegria_cristo_ressurgiu.pdf" },
                { "name": "vai_falar_no_evangelho", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/vai_falar_no_evangelho.pdf" },
                { "name": "vinde_espirito_de_deus", "type": "pdf", "path": "Letras/4 - Aclama√ß√£o ao evangelho/vinde_espirito_de_deus.pdf" }
            ],
            "5 - Ofert√≥rio": [
                { "name": "a_mesa_santa_que_preparamos", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/a_mesa_santa_que_preparamos.pdf" },
                { "name": "de_maos_estendidas", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/de_maos_estendidas.pdf" },
                { "name": "meu_coracao_eh_para_ti", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/meu_coracao_eh_para_ti.pdf" },
                { "name": "minha_vida_tem_sentido", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/minha_vida_tem_sentido.pdf" },
                { "name": "muitos_graos_de_trigo", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/muitos_graos_de_trigo.pdf" },
                { "name": "ofertas_singelas", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/ofertas_singelas.pdf" },
                { "name": "os_dons_que_trago_aqui", "type": "jpeg", "path": "Letras/5 - Ofert√≥rio/os_dons_que_trago_aqui.jpeg" },
                { "name": "sabes_senhor", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/sabes_senhor.pdf" },
                { "name": "um_coracao_para_amar", "type": "pdf", "path": "Letras/5 - Ofert√≥rio/um_coracao_para_amar.pdf" }
            ],
            "6 - Santo": [
                { "name": "hosana_eh", "type": "pdf", "path": "Letras/6 - Santo/hosana_eh.pdf" },
                { "name": "hosana_no_alto_ceu", "type": "pdf", "path": "Letras/6 - Santo/hosana_no_alto_ceu.pdf" },
                { "name": "o_senhor_eh_santo", "type": "pdf", "path": "Letras/6 - Santo/o_senhor_eh_santo.pdf" },
                { "name": "santo_santo_e", "type": "pdf", "path": "Letras/6 - Santo/santo_santo_e.pdf" },
                { "name": "santo_santo_santo_eh_o_senhor", "type": "jpeg", "path": "Letras/6 - Santo/santo_santo_santo_eh_o_senhor.jpeg" },
                { "name": "senhor_deus_do_universo", "type": "pdf", "path": "Letras/6 - Santo/senhor_deus_do_universo.pdf" }
            ],
            "7 - Comunh√£o": [
                { "name": "a_barca", "type": "pdf", "path": "Letras/7 - Comunh√£o/a_barca.pdf" },
                { "name": "a_ti_meu_deus", "type": "pdf", "path": "Letras/7 - Comunh√£o/a_ti_meu_deus.pdf" },
                { "name": "antes_da_morte_e_ressurreicao", "type": "pdf", "path": "Letras/7 - Comunh√£o/antes_da_morte_e_ressurreicao.pdf" },
                { "name": "cantar_a_beleza_da_vida", "type": "pdf", "path": "Letras/7 - Comunh√£o/cantar_a_beleza_da_vida.pdf" },
                { "name": "como_es_lindo", "type": "pdf", "path": "Letras/7 - Comunh√£o/como_es_lindo.pdf" },
                { "name": "conhe√ßo_um_cora√ß√£o", "type": "pdf", "path": "Letras/7 - Comunh√£o/conhe√ßo_um_cora√ß√£o.pdf" },
                { "name": "da_cepa_brotou_a_rama", "type": "pdf", "path": "Letras/7 - Comunh√£o/da_cepa_brotou_a_rama.pdf" },
                { "name": "desamarrem_as_sandalias", "type": "pdf", "path": "Letras/7 - Comunh√£o/desamarrem_as_sandalias.pdf" },
                { "name": "eis_que_sou_o_pao_da_vida", "type": "jpeg", "path": "Letras/7 - Comunh√£o/eis_que_sou_o_pao_da_vida.jpeg" },
                { "name": "estas_entre_nos", "type": "pdf", "path": "Letras/7 - Comunh√£o/estas_entre_nos.pdf" },
                { "name": "este_pranto_em_minhas_maos", "type": "pdf", "path": "Letras/7 - Comunh√£o/este_pranto_em_minhas_maos.pdf" },
                { "name": "eu_navegarei", "type": "pdf", "path": "Letras/7 - Comunh√£o/eu_navegarei.pdf" },
                { "name": "eu_quis_comer_esta_ceia_agora", "type": "pdf", "path": "Letras/7 - Comunh√£o/eu_quis_comer_esta_ceia_agora.pdf" },
                { "name": "eu_vim_para_que_todos_tenham_vida", "type": "pdf", "path": "Letras/7 - Comunh√£o/eu_vim_para_que_todos_tenham_vida.pdf" },
                { "name": "pelos_prados", "type": "pdf", "path": "Letras/7 - Comunh√£o/pelos_prados.pdf" },
                { "name": "procuro_abrigo_nos_coracoes", "type": "pdf", "path": "Letras/7 - Comunh√£o/procuro_abrigo_nos_coracoes.pdf" },
                { "name": "quando_teu_pai_revelou", "type": "pdf", "path": "Letras/7 - Comunh√£o/quando_teu_pai_revelou.pdf" },
                { "name": "quem_nos_separara", "type": "pdf", "path": "Letras/7 - Comunh√£o/quem_nos_separara.pdf" },
                { "name": "sacramento_da_comunhao", "type": "pdf", "path": "Letras/7 - Comunh√£o/sacramento_da_comunhao.pdf" },
                { "name": "sim_eu_quero", "type": "pdf", "path": "Letras/7 - Comunh√£o/sim_eu_quero.pdf" },
                { "name": "sonda_me", "type": "pdf", "path": "Letras/7 - Comunh√£o/sonda_me.pdf" },
                { "name": "todo_aquele_que_comer", "type": "jpeg", "path": "Letras/7 - Comunh√£o/todo_aquele_que_comer.jpeg" },
                { "name": "vem_eu_mostrarei", "type": "pdf", "path": "Letras/7 - Comunh√£o/vem_eu_mostrarei.pdf" },
                { "name": "vou_cantar_teu_amor", "type": "pdf", "path": "Letras/7 - Comunh√£o/vou_cantar_teu_amor.pdf" }
            ],
            "8 - A√ß√£o de Gra√ßas": [
                { "name": "deus_esta_aqui", "type": "pdf", "path": "Letras/8 - A√ß√£o de Gra√ßas/deus_esta_aqui.pdf" },
                { "name": "e_impossivel_nao_crer_em_ti", "type": "pdf", "path": "Letras/8 - A√ß√£o de Gra√ßas/e_impossivel_nao_crer_em_ti.pdf" },
                { "name": "espirito_santo", "type": "pdf", "path": "Letras/8 - A√ß√£o de Gra√ßas/espirito_santo.pdf" },
                { "name": "obrigado_senhor", "type": "pdf", "path": "Letras/8 - A√ß√£o de Gra√ßas/obrigado_senhor.pdf" },
                { "name": "so_em_ti", "type": "jpeg", "path": "Letras/8 - A√ß√£o de Gra√ßas/so_em_ti.jpeg" }
            ],
            "9 - Final": [
                { "name": "a_alegria_esta_no_coracao", "type": "pdf", "path": "Letras/9 - Final/a_alegria_esta_no_coracao.pdf" },
                { "name": "como_o_pai_me_enviou", "type": "pdf", "path": "Letras/9 - Final/como_o_pai_me_enviou.pdf" },
                { "name": "cristo_eh_a_felicidade", "type": "pdf", "path": "Letras/9 - Final/cristo_eh_a_felicidade.pdf" },
                { "name": "deixa_luz_do_ceu_entrar", "type": "pdf", "path": "Letras/9 - Final/deixa_luz_do_ceu_entrar.pdf" },
                { "name": "hoje_e_tempo_de_louvar", "type": "pdf", "path": "Letras/9 - Final/hoje_e_tempo_de_louvar.pdf" },
                { "name": "pelas_estradas_da_vida", "type": "pdf", "path": "Letras/9 - Final/pelas_estradas_da_vida.pdf" },
                { "name": "segura_na_mao_de_deus", "type": "pdf", "path": "Letras/9 - Final/segura_na_mao_de_deus.pdf" },
                { "name": "tomado_pela_mao", "type": "pdf", "path": "Letras/9 - Final/tomado_pela_mao.pdf" },
                { "name": "tu_es_razao_jornada", "type": "pdf", "path": "Letras/9 - Final/tu_es_razao_jornada.pdf" }
            ],
            "10 - Abra√ßo de Paz": [
                { "name": "esteja_sempre_com_voce", "type": "pdf", "path": "Letras/10 - Abra√ßo de Paz/esteja_sempre_com_voce.pdf" },
                { "name": "irmao_minha_paz_eu_te_dou", "type": "pdf", "path": "Letras/10 - Abra√ßo de Paz/irmao_minha_paz_eu_te_dou.pdf" },
                { "name": "paz_paz_de_cristo", "type": "pdf", "path": "Letras/10 - Abra√ßo de Paz/paz_paz_de_cristo.pdf" }
            ],
            "15 - Abra√ßo de Paz": [
                { "name": "quero_te_dar_a_paz", "type": "pdf", "path": "Letras/15 - Abra√ßo de Paz/quero_te_dar_a_paz.pdf" }
            ],
            "16 - Cordeiro": [
                { "name": "cordeiro_de_deus", "type": "pdf", "path": "Letras/16 - Cordeiro/cordeiro_de_deus.pdf" }
            ],
            "11 - Canticos Marianos": [
                { "name": "a_escolhida", "type": "pdf", "path": "Letras/11 - Canticos Marianos/a_escolhida.pdf" },
                { "name": "ave_cheia_de_graca", "type": "pdf", "path": "Letras/11 - Canticos Marianos/ave_cheia_de_graca.pdf" },
                { "name": "imaculada_maria_de_deus", "type": "pdf", "path": "Letras/11 - Canticos Marianos/imaculada_maria_de_deus.pdf" },
                { "name": "maria_de_nazare", "type": "pdf", "path": "Letras/11 - Canticos Marianos/maria_de_nazare.pdf" },
                { "name": "santa_mae_maria", "type": "pdf", "path": "Letras/11 - Canticos Marianos/santa_mae_maria.pdf" },
                { "name": "santa_maria_vem", "type": "pdf", "path": "Letras/11 - Canticos Marianos/santa_maria_vem.pdf" }
            ],
            "12 - Louvor e medita√ß√£o": [
                { "name": "Desamarrem_as_sand√°lias", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/Desamarrem_as_sand√°lias.pdf" },
                { "name": "a_alegria_esta_no_coracao", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/a_alegria_esta_no_coracao.pdf" },
                { "name": "a_nos_descei_divina_luz", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/a_nos_descei_divina_luz.pdf" },
                { "name": "agua_viva", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/agua_viva.pdf" },
                { "name": "amar_como_jesus_amou", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/amar_como_jesus_amou.pdf" },
                { "name": "bate_o_sino", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/bate_o_sino.pdf" },
                { "name": "eu_louvarei", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/eu_louvarei.pdf" },
                { "name": "eu_quero_um_rio", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/eu_quero_um_rio.pdf" },
                { "name": "louvado_seja_o_meu_senhor", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/louvado_seja_o_meu_senhor.pdf" },
                { "name": "meu_mestre__a_minha_vida_e_do_mestre", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/meu_mestre__a_minha_vida_e_do_mestre.pdf" },
                { "name": "noite_feliz", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/noite_feliz.pdf" },
                { "name": "noites_traicoeiras", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/noites_traicoeiras.pdf" },
                { "name": "oracao_da_familia", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/oracao_da_familia.pdf" },
                { "name": "oracao_de_sao_francisco", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/oracao_de_sao_francisco.pdf" },
                { "name": "podes_reinar", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/podes_reinar.pdf" },
                { "name": "quao_grande_es_tu", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/quao_grande_es_tu.pdf" },
                { "name": "segura_na_mao_de_deus", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/segura_na_mao_de_deus.pdf" },
                { "name": "tao_sublime", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/tao_sublime.pdf" },
                { "name": "vou-cantar-teu-amor", "type": "pdf", "path": "Letras/12 - Louvor e medita√ß√£o/vou-cantar-teu-amor.pdf" }
            ],
            "13 - Diversos": [
                { "name": "Consagra√ß√£o a nossa senhora", "type": "pdf", "path": "Letras/13 - Diversos/Consagra√ß√£o a nossa senhora.pdf" },
                { "name": "podes_reinar", "type": "pdf", "path": "Letras/13 - Diversos/podes_reinar.pdf" },
                { "name": "prova_de_amor", "type": "pdf", "path": "Letras/13 - Diversos/prova_de_amor.pdf" },
                { "name": "tudo_e_do_pai", "type": "pdf", "path": "Letras/13 - Diversos/tudo_e_do_pai.pdf" }
            ],
            "14 - Salmos": [
                { "name": "salmo 137", "type": "pdf", "path": "Letras/14 - Salmos/salmo 137.pdf" }
            ]
        };

        // Inicializar a aplica√ß√£o
        document.addEventListener("DOMContentLoaded", function() {
            generateSections();
            setupEventListeners();
        });

        function generateSections() {
            const container = document.getElementById("sectionsContainer");
            
            sections.sort((a, b) => a.order - b.order).forEach(section => {
                const sectionCard = document.createElement("div");
                sectionCard.className = "section-card";
                sectionCard.innerHTML = `
                    <div class="section-header" onclick="toggleSection('${section.id}')">
                        <div class="section-title">${section.name}</div>
                        <div class="section-toggle" id="toggle-${section.id}">‚ñº</div>
                    </div>
                    <div class="section-content" id="content-${section.id}">
                        <div id="songs-${section.id}">
                            <div style="padding: 20px; text-align: center; color: rgba(255,255,255,0.7);">
                                Carregando c√¢nticos...
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(sectionCard);
            });
        }

        function toggleSection(sectionId) {
            const content = document.getElementById(`content-${sectionId}`);
            const toggle = document.getElementById(`toggle-${sectionId}`);
            
            if (content.classList.contains("expanded")) {
                content.classList.remove("expanded");
                toggle.textContent = "‚ñº";
            } else {
                content.classList.add("expanded");
                toggle.textContent = "‚ñ≤";
                loadSongsForSection(sectionId);
            }
        }

        function loadSongsForSection(sectionId) {
            const songsContainer = document.getElementById(`songs-${sectionId}`);
            const songs = songData[sectionId] || [];
            
            if (songs.length === 0) {
                songsContainer.innerHTML = `
                    <div style="padding: 20px; text-align: center; color: rgba(255,255,255,0.7);">
                        Nenhum c√¢ntico encontrado nesta se√ß√£o
                    </div>
                `;
                return;
            }

            songsContainer.innerHTML = songs.map(song => `
                <div class="song-item" draggable="true" ondragstart="dragStart(event)" data-song-name="${song.name}" data-section-id="${sectionId}" data-song-type="${song.type}" data-song-path="${song.path}">
                    <div class="song-name" onclick="openFile('${song.path}', '${song.type}')">${song.name.replace(/_/g, " ")}</div>
                    <div class="add-btn" onclick="addToMissa('${song.name}', '${sectionId}', '${song.type}', '${song.path}')">+</div>
                </div>
            `).join("");
        }

        function openFile(filePath, fileType) {
            const fileViewerContainer = document.getElementById("fileViewerContainer");
            fileViewerContainer.innerHTML = ""; // Limpa o conte√∫do anterior

            const fileUrl = `${baseUrl}${filePath}`;
            
            if (fileType === "pdf") {
                const iframe = document.createElement("iframe");
                iframe.className = "file-viewer";
                iframe.src = fileUrl;
                fileViewerContainer.appendChild(iframe);
            } else if (fileType === "jpeg" || fileType === "jpg") {
                const img = document.createElement("img");
                img.className = "file-viewer";
                img.src = fileUrl;
                img.style.objectFit = "contain";
                fileViewerContainer.appendChild(img);
            } else {
                fileViewerContainer.innerHTML = `<p style="text-align: center; color: #ff0000;">Formato de arquivo n√£o suportado: ${fileType}</p>`;
            }
            
            document.getElementById("popupOverlay").style.display = "flex";
        }

        function closePopup() {
            document.getElementById("popupOverlay").style.display = "none";
            document.getElementById("fileViewerContainer").innerHTML = "";
        }

        function toggleMissaHoje() {
            const missaHoje = document.getElementById("missaHoje");
            missaHoje.classList.toggle("visible");
        }

        function addToMissa(songName, sectionId, songType, songPath) {
            const missaList = document.getElementById("missaList");
            
            // Remover mensagem de placeholder se existir
            const placeholder = missaList.querySelector("p");
            if (placeholder) {
                placeholder.remove();
            }

            // Criar item da missa
            const missaItem = document.createElement("div");
            missaItem.className = "missa-item";
            missaItem.innerHTML = `
                <div onclick="openFile('${songPath}', '${songType}')" style="cursor: pointer; flex: 1;">
                    ${songName.replace(/_/g, " ")}
                </div>
                <div class="remove-btn" onclick="removeFromMissa(this)">√ó</div>
            `;
            
            missaList.appendChild(missaItem);
        }

        function removeFromMissa(button) {
            button.parentElement.remove();
            
            // Se n√£o h√° mais itens, mostrar placeholder
            const missaList = document.getElementById("missaList");
            if (missaList.children.length === 0) {
                missaList.innerHTML = `
                    <p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">
                        Arraste os c√¢nticos aqui para organizar a missa
                    </p>
                `;
            }
        }

        function saveMissa() {
            const missaItems = Array.from(document.querySelectorAll(".missa-item")).map(item => {
                const text = item.querySelector("div").textContent.trim();
                return text;
            });
            
            localStorage.setItem("missaAtual", JSON.stringify(missaItems));
            alert("Missa salva com sucesso!");
        }

        function clearMissa() {
            if (confirm("Tem certeza que deseja limpar a missa atual?")) {
                document.getElementById("missaList").innerHTML = `
                    <p style="text-align: center; color: rgba(255,255,255,0.7); font-style: italic;">
                        Arraste os c√¢nticos aqui para organizar a missa
                    </p>
                `;
            }
        }

        function loadMissa() {
            const savedMissa = localStorage.getItem("missaAtual");
            if (savedMissa) {
                const missaItems = JSON.parse(savedMissa);
                const missaList = document.getElementById("missaList");
                
                missaList.innerHTML = "";
                
                missaItems.forEach(songName => {
                    const missaItem = document.createElement("div");
                    missaItem.className = "missa-item";
                    missaItem.innerHTML = `
                        <div style="cursor: default; flex: 1;">
                            ${songName}
                        </div>
                        <div class="remove-btn" onclick="removeFromMissa(this)">√ó</div>
                    `;
                    missaList.appendChild(missaItem);
                });
                
                alert("Missa carregada com sucesso!");
            } else {
                alert("Nenhuma missa salva encontrada.");
            }
        }

        function setupEventListeners() {
            // Pesquisa
            const searchInput = document.getElementById("searchInput");
            const searchResults = document.getElementById("searchResults");
            
            searchInput.addEventListener("input", function() {
                const query = this.value.toLowerCase().trim();
                
                if (query.length < 2) {
                    searchResults.style.display = "none";
                    return;
                }
                
                // Buscar por trechos de letra
                const results = [];
                Object.keys(songData).forEach(sectionId => {
                    songData[sectionId].forEach(song => {
                        if (song.name.toLowerCase().includes(query)) {
                            results.push({ songName: song.name, sectionId: sectionId, songType: song.type, songPath: song.path });
                        }
                    });
                });
                
                if (results.length > 0) {
                    searchResults.innerHTML = results.map(result => `
                        <div class="search-result-item" onclick="openFile('${result.songPath}', '${result.songType}')">
                            ${result.songName.replace(/_/g, " ")} <small>(${sections.find(s => s.id === result.sectionId).name})</small>
                        </div>
                    `).join("");
                    searchResults.style.display = "block";
                } else {
                    searchResults.innerHTML = '<div class="search-result-item">Nenhum resultado encontrado</div>';
                    searchResults.style.display = "block";
                }
            });
            
            // Fechar resultados de pesquisa ao clicar fora
            document.addEventListener("click", function(e) {
                if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                    searchResults.style.display = "none";
                }
            });
            
            // Drag and Drop
            const missaList = document.getElementById("missaList");
            
            missaList.addEventListener("dragover", function(e) {
                e.preventDefault();
                this.classList.add("drop-zone");
            });
            
            missaList.addEventListener("dragleave", function(e) {
                if (!this.contains(e.relatedTarget)) {
                    this.classList.remove("drop-zone");
                }
            });
            
            missaList.addEventListener("drop", function(e) {
                e.preventDefault();
                this.classList.remove("drop-zone");
                
                const songName = e.dataTransfer.getData("text/song-name");
                const sectionId = e.dataTransfer.getData("text/section-id");
                const songType = e.dataTransfer.getData("text/song-type");
                const songPath = e.dataTransfer.getData("text/song-path");
                
                if (songName && sectionId && songType && songPath) {
                    addToMissa(songName, sectionId, songType, songPath);
                }
            });

            // Fechar Missa de Hoje ao clicar fora
            document.addEventListener("click", function(e) {
                const missaHoje = document.getElementById("missaHoje");
                const missaToggle = document.getElementById("missaHojeToggle");
                
                if (missaHoje.classList.contains("visible") && 
                    !missaHoje.contains(e.target) && 
                    !missaToggle.contains(e.target)) {
                    missaHoje.classList.remove("visible");
                }
            });
        }

        function dragStart(e) {
            e.target.classList.add("dragging");
            e.dataTransfer.setData("text/song-name", e.target.dataset.songName);
            e.dataTransfer.setData("text/section-id", e.target.dataset.sectionId);
            e.dataTransfer.setData("text/song-type", e.target.dataset.songType);
            e.dataTransfer.setData("text/song-path", e.target.dataset.songPath);
            
            setTimeout(() => {
                e.target.classList.remove("dragging");
            }, 0);
        }

        // Fechar popup ao clicar fora
        document.getElementById("popupOverlay").addEventListener("click", function(e) {
            if (e.target === this) {
                closePopup();
            }
        });
    </script>
</body>
</html>

